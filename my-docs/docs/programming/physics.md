# 物理エンジン

物理エンジンは、ゲーム内の物体の動きと相互作用をシミュレートするためのシステムです。リアルな動き、衝突、および物理的な効果を実現するために不可欠です。

## 物理シミュレーションの基本概念

### 運動学

- **位置と速度**: 物体の空間内の位置と移動速度
- **加速度**: 速度の変化率
- **回転**: 角度、角速度、角加速度

### 力学

- **力**: 物体の動きを変化させる要因
- **質量**: 物体の慣性の尺度
- **運動量**: 質量と速度の積
- **トルク**: 回転力

## 衝突検出

### 広域フェーズ

多数の物体間の潜在的な衝突を効率的に絞り込むための手法。

- **空間分割**: グリッド、四分木、八分木
- **スイープ&プルーン**: 軸に沿ったバウンディングボックスの投影
- **境界ボリューム階層 (BVH)**: 階層的な境界ボリューム

### 狭域フェーズ

実際の衝突を正確に検出するための手法。

- **球体同士**: 中心間の距離と半径の比較
- **AABB (軸並行境界ボックス)**: 各軸に沿った重なりの確認
- **OBB (有向境界ボックス)**: 分離軸定理を使用
- **凸多面体**: GJKアルゴリズム
- **凹形状**: 凸分解または階層的アプローチ

## 衝突応答

衝突が検出された後の物体の動きを計算する処理。

- **反発係数**: 衝突後のエネルギー損失を制御
- **摩擦**: 接触面に沿った動きの抵抗
- **衝撃力**: 衝突時に加えられる瞬間的な力
- **連続衝突**: 複数の物体が関与する複雑な衝突

## 制約ソルバー

物体間の関係を維持するためのシステム。

- **距離制約**: 2点間の距離を維持
- **ヒンジ制約**: 回転軸を定義
- **スライダー制約**: 直線上の動きを許可
- **ラグドール**: キャラクターの物理的な動きをシミュレート

## 特殊な物理効果

- **布シミュレーション**: 柔軟な材料の動きをモデル化
- **流体力学**: 液体と気体の動きをシミュレート
- **破壊シミュレーション**: オブジェクトの破壊と断片化
- **ソフトボディ**: 変形可能なオブジェクト

## 物理エンジンの最適化

- **時間ステップ管理**: 安定性とパフォーマンスのバランス
- **スリープ状態**: 静止オブジェクトの計算を省略
- **近似計算**: 精度とパフォーマンスのトレードオフ
- **並列処理**: マルチコアプロセッサの活用

## 一般的な物理エンジン

- **Box2D**: 2D物理に特化した軽量エンジン
- **Bullet Physics**: オープンソースの3D物理エンジン
- **PhysX**: NVIDIAが開発するハードウェア加速対応エンジン
- **Havok**: 商用の高性能物理エンジン

## 参考資料

- "Game Physics Engine Development" by Ian Millington
- "Real-Time Collision Detection" by Christer Ericson
- "Physics for Game Developers" by David M. Bourg